@page "/add-record"
@inject RecordService RecordService

<h3>AddRecord</h3>

<EditForm Model="@newRecord" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label for="recordName" class="form-label">Record Name</label>
        <InputText id="recordName" class="form-control" @bind-Value="newRecord.RecordName" />
    </div>
    <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <InputText id="description" class="form-control" @bind-Value="newRecord.Description" />
    </div>
    <div class="mb-3">
        <label for="createdBy" class="form-label">Created By</label>
        <InputText id="createdBy" class="form-control" @bind-Value="newRecord.CreatedBy" />
    </div>
    <button type="submit" class="btn btn-primary">Add Record</button>
</EditForm>

@if (successMessage != null)
{
    <div class="alert alert-success mt-3">@successMessage</div>
}

@code {
    private Record newRecord = new();
    private string? successMessage;

    private async Task HandleValidSubmit()
    {
        await RecordService.AddRecordAsync(newRecord);
        successMessage = "Record added successfully!";
        newRecord = new Record(); // Reset the form after submission
        StateHasChanged();
    }
}
