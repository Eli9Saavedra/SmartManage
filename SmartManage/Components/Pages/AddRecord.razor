@page "/add-record"
@inject RecordService RecordService
@inject NavigationManager NavigationManager

<h3>AddRecord</h3>

<EditForm Model="@newRecord" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label for="recordName" class="form-label">Record Name</label>
        <InputText id="recordName" class="form-control" @bind-Value="newRecord.RecordName" />
    </div>
    <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <InputText id="description" class="form-control" @bind-Value="newRecord.Description" />
    </div>
    <div class="mb-3">
        <label for="createdBy" class="form-label">Created By</label>
        <InputText id="createdBy" class="form-control" @bind-Value="newRecord.CreatedBy" />
    </div>
    <button type="submit" class="btn btn-primary">Add Record</button>
</EditForm>

@code {
    private Record newRecord = new();

    private async Task HandleValidSubmit()
    {
        await RecordService.AddRecordAsync(newRecord);
        NavigationManager.NavigateTo("/view-records");
    }
}
